{"version":3,"sources":["webpack:///./src/components/user/Users.vue?bd5a","webpack:///src/components/user/Users.vue","webpack:///./src/components/user/Users.vue?4c99","webpack:///./src/components/user/Users.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","separator-class","to","path","_v","staticClass","gutter","span","placeholder","clearable","on","clear","getUserList","model","value","queryInfo","callback","$$v","$set","expression","slot","icon","click","type","$event","dialogVisible","data","userlist","border","row-key","label","prop","scopedSlots","_u","key","fn","scope","change","userStateChange","row","width","size","showEditDialog","id","removeUserById","effect","content","placement","enterable","setRole","current-page","pagenum","page-sizes","page-size","pagesize","layout","total","size-change","handleSizeChange","current-change","handleCurrentChange","title","visible","update:visible","close","addDialogClosed","ref","addForm","rules","addFormRules","label-width","addUser","editDialogVisible","editDialogClosed","editForm","editFormRules","disabled","editUserInfo","setRoleDialogVisible","setRoleDialogClosed","_s","userInfo","username","role_name","selectedRoleId","_l","item","roleName","saveRoleInfo","staticRenderFns","Usersvue_type_script_lang_js_","checkEmail","rule","cb","regEmail","test","Error","checkMobile","regMobile","rolesList","query","password","email","mobile","required","message","trigger","min","max","validator","created","methods","_setRole","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","_ref","res","wrap","_context","prev","next","$http","get","sent","meta","status","abrupt","$message","error","stop","_x","apply","arguments","_saveRoleInfo","_callee2","_ref2","_context2","info","put","concat","rid","success","_getUserList","_callee3","_ref3","_context3","params","users","newSize","newPage","_userStateChange","_callee4","_ref4","_context4","mg_state","_x2","$refs","addFormRef","resetFields","_this","validate","_ref5","_callee5","valid","_ref6","_context5","post","_x3","_showEditDialog","_callee6","_ref7","_context6","_x4","editFormRef","_this2","_ref8","_callee7","_ref9","_context7","_x5","_removeUserById","_callee8","confirmResult","_ref10","_context8","$confirm","confirmButtonText","cancelButtonText","center","catch","err","delete","_x6","user_Usersvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"6GAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,iBAAqCE,MAAA,CAAOC,kBAAA,wBAAyC,CAAAH,EAAA,sBAA2BE,MAAA,CAAOE,GAAA,CAAMC,KAAA,WAAkB,CAAAT,EAAAU,GAAA,QAAAN,EAAA,sBAAAJ,EAAAU,GAAA,UAAAN,EAAA,sBAAAJ,EAAAU,GAAA,cAAAN,EAAA,WAAuHO,YAAA,YAAuB,CAAAP,EAAA,UAAeE,MAAA,CAAOM,OAAA,KAAa,CAAAR,EAAA,UAAeE,MAAA,CAAOO,KAAA,IAAU,CAAAT,EAAA,YAAiBE,MAAA,CAAOQ,YAAA,QAAAC,UAAA,IAAqCC,GAAA,CAAKC,MAAAjB,EAAAkB,aAAwBC,MAAA,CAAQC,MAAApB,EAAAqB,UAAA,MAAAC,SAAA,SAAAC,GAAqDvB,EAAAwB,KAAAxB,EAAAqB,UAAA,QAAAE,IAAsCE,WAAA,oBAA+B,CAAArB,EAAA,aAAkBE,MAAA,CAAOoB,KAAA,SAAAC,KAAA,kBAAwCX,GAAA,CAAKY,MAAA5B,EAAAkB,aAAwBQ,KAAA,YAAe,OAAAtB,EAAA,UAAuBE,MAAA,CAAOO,KAAA,IAAU,CAAAT,EAAA,aAAkBE,MAAA,CAAOuB,KAAA,WAAiBb,GAAA,CAAKY,MAAA,SAAAE,GAAyB9B,EAAA+B,eAAA,KAAyB,CAAA/B,EAAAU,GAAA,kBAAAN,EAAA,YAA0CE,MAAA,CAAO0B,KAAAhC,EAAAiC,SAAAC,OAAA,GAAAC,UAAA,OAAgD,CAAA/B,EAAA,mBAAwBE,MAAA,CAAOuB,KAAA,WAAgBzB,EAAA,mBAAwBE,MAAA,CAAO8B,MAAA,KAAAC,KAAA,cAAgCjC,EAAA,mBAAwBE,MAAA,CAAO8B,MAAA,KAAAC,KAAA,WAA6BjC,EAAA,mBAAwBE,MAAA,CAAO8B,MAAA,KAAAC,KAAA,YAA8BjC,EAAA,mBAAwBE,MAAA,CAAO8B,MAAA,KAAAC,KAAA,eAAiCjC,EAAA,mBAAwBE,MAAA,CAAO8B,MAAA,MAAaE,YAAAtC,EAAAuC,GAAA,EAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAAtC,EAAA,aAAwBY,GAAA,CAAI2B,OAAA,SAAAb,GAA0B,OAAA9B,EAAA4C,gBAAAF,EAAAG,OAAuC1B,MAAA,CAAQC,MAAAsB,EAAAG,IAAA,SAAAvB,SAAA,SAAAC,GAAoDvB,EAAAwB,KAAAkB,EAAAG,IAAA,WAAAtB,IAAqCE,WAAA,+BAAyCrB,EAAA,mBAAwBE,MAAA,CAAO8B,MAAA,KAAAU,MAAA,OAA2BR,YAAAtC,EAAAuC,GAAA,EAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAAtC,EAAA,aAAwBE,MAAA,CAAOuB,KAAA,UAAAF,KAAA,eAAAoB,KAAA,QAAqD/B,GAAA,CAAKY,MAAA,SAAAE,GAAyB,OAAA9B,EAAAgD,eAAAN,EAAAG,IAAAI,QAA0C7C,EAAA,aAAkBE,MAAA,CAAOuB,KAAA,SAAAF,KAAA,iBAAAoB,KAAA,QAAsD/B,GAAA,CAAKY,MAAA,SAAAE,GAAyB,OAAA9B,EAAAkD,eAAAR,EAAAG,IAAAI,QAA0C7C,EAAA,cAAmBO,YAAA,OAAAL,MAAA,CAA0B6C,OAAA,OAAAC,QAAA,OAAAC,UAAA,MAAAC,WAAA,IAAsE,CAAAlD,EAAA,aAAkBE,MAAA,CAAOuB,KAAA,UAAAkB,KAAA,OAAApB,KAAA,mBAAwDX,GAAA,CAAKY,MAAA,SAAAE,GAAyB,OAAA9B,EAAAuD,QAAAb,EAAAG,UAAgC,WAAW,GAAAzC,EAAA,iBAA0BE,MAAA,CAAOkD,eAAAxD,EAAAqB,UAAAoC,QAAAC,aAAA,UAAAC,YAAA3D,EAAAqB,UAAAuC,SAAAC,OAAA,0CAAAC,MAAA9D,EAAA8D,OAAuK9C,GAAA,CAAK+C,cAAA/D,EAAAgE,iBAAAC,iBAAAjE,EAAAkE,wBAA6E,GAAA9D,EAAA,aAAsBE,MAAA,CAAO6D,MAAA,OAAAC,QAAApE,EAAA+B,cAAAe,MAAA,OAAyD9B,GAAA,CAAKqD,iBAAA,SAAAvC,GAAkC9B,EAAA+B,cAAAD,GAAyBwC,MAAAtE,EAAAuE,kBAA8B,CAAAnE,EAAA,WAAgBoE,IAAA,aAAAlE,MAAA,CAAwBa,MAAAnB,EAAAyE,QAAAC,MAAA1E,EAAA2E,aAAAC,cAAA,SAAmE,CAAAxE,EAAA,gBAAqBE,MAAA,CAAO8B,MAAA,MAAAC,KAAA,aAAiC,CAAAjC,EAAA,YAAiBe,MAAA,CAAOC,MAAApB,EAAAyE,QAAA,SAAAnD,SAAA,SAAAC,GAAsDvB,EAAAwB,KAAAxB,EAAAyE,QAAA,WAAAlD,IAAuCE,WAAA,uBAAgC,GAAArB,EAAA,gBAAyBE,MAAA,CAAO8B,MAAA,KAAAC,KAAA,aAAgC,CAAAjC,EAAA,YAAiBe,MAAA,CAAOC,MAAApB,EAAAyE,QAAA,SAAAnD,SAAA,SAAAC,GAAsDvB,EAAAwB,KAAAxB,EAAAyE,QAAA,WAAAlD,IAAuCE,WAAA,uBAAgC,GAAArB,EAAA,gBAAyBE,MAAA,CAAO8B,MAAA,KAAAC,KAAA,UAA6B,CAAAjC,EAAA,YAAiBe,MAAA,CAAOC,MAAApB,EAAAyE,QAAA,MAAAnD,SAAA,SAAAC,GAAmDvB,EAAAwB,KAAAxB,EAAAyE,QAAA,QAAAlD,IAAoCE,WAAA,oBAA6B,GAAArB,EAAA,gBAAyBE,MAAA,CAAO8B,MAAA,KAAAC,KAAA,WAA8B,CAAAjC,EAAA,YAAiBe,MAAA,CAAOC,MAAApB,EAAAyE,QAAA,OAAAnD,SAAA,SAAAC,GAAoDvB,EAAAwB,KAAAxB,EAAAyE,QAAA,SAAAlD,IAAqCE,WAAA,qBAA8B,OAAArB,EAAA,QAAqBO,YAAA,gBAAAL,MAAA,CAAmCoB,KAAA,UAAgBA,KAAA,UAAe,CAAAtB,EAAA,aAAkBY,GAAA,CAAIY,MAAA,SAAAE,GAAyB9B,EAAA+B,eAAA,KAA4B,CAAA/B,EAAAU,GAAA,SAAAN,EAAA,aAAkCE,MAAA,CAAOuB,KAAA,WAAiBb,GAAA,CAAKY,MAAA5B,EAAA6E,UAAqB,CAAA7E,EAAAU,GAAA,iBAAAN,EAAA,aAA0CE,MAAA,CAAO6D,MAAA,OAAAC,QAAApE,EAAA8E,kBAAAhC,MAAA,OAA6D9B,GAAA,CAAKqD,iBAAA,SAAAvC,GAAkC9B,EAAA8E,kBAAAhD,GAA6BwC,MAAAtE,EAAA+E,mBAA+B,CAAA3E,EAAA,WAAgBoE,IAAA,cAAAlE,MAAA,CAAyBa,MAAAnB,EAAAgF,SAAAN,MAAA1E,EAAAiF,cAAAL,cAAA,SAAqE,CAAAxE,EAAA,gBAAqBE,MAAA,CAAO8B,MAAA,QAAe,CAAAhC,EAAA,YAAiBE,MAAA,CAAO4E,SAAA,IAAc/D,MAAA,CAAQC,MAAApB,EAAAgF,SAAA,SAAA1D,SAAA,SAAAC,GAAuDvB,EAAAwB,KAAAxB,EAAAgF,SAAA,WAAAzD,IAAwCE,WAAA,wBAAiC,GAAArB,EAAA,gBAAyBE,MAAA,CAAO8B,MAAA,KAAAC,KAAA,UAA6B,CAAAjC,EAAA,YAAiBe,MAAA,CAAOC,MAAApB,EAAAgF,SAAA,MAAA1D,SAAA,SAAAC,GAAoDvB,EAAAwB,KAAAxB,EAAAgF,SAAA,QAAAzD,IAAqCE,WAAA,qBAA8B,GAAArB,EAAA,gBAAyBE,MAAA,CAAO8B,MAAA,KAAAC,KAAA,WAA8B,CAAAjC,EAAA,YAAiBe,MAAA,CAAOC,MAAApB,EAAAgF,SAAA,OAAA1D,SAAA,SAAAC,GAAqDvB,EAAAwB,KAAAxB,EAAAgF,SAAA,SAAAzD,IAAsCE,WAAA,sBAA+B,OAAArB,EAAA,QAAqBO,YAAA,gBAAAL,MAAA,CAAmCoB,KAAA,UAAgBA,KAAA,UAAe,CAAAtB,EAAA,aAAkBY,GAAA,CAAIY,MAAA,SAAAE,GAAyB9B,EAAA8E,mBAAA,KAAgC,CAAA9E,EAAAU,GAAA,SAAAN,EAAA,aAAkCE,MAAA,CAAOuB,KAAA,WAAiBb,GAAA,CAAKY,MAAA5B,EAAAmF,eAA0B,CAAAnF,EAAAU,GAAA,iBAAAN,EAAA,aAA0CE,MAAA,CAAO6D,MAAA,OAAAC,QAAApE,EAAAoF,qBAAAtC,MAAA,OAAgE9B,GAAA,CAAKqD,iBAAA,SAAAvC,GAAkC9B,EAAAoF,qBAAAtD,GAAgCwC,MAAAtE,EAAAqF,sBAAkC,CAAAjF,EAAA,OAAAA,EAAA,KAAAJ,EAAAU,GAAA,WAAAV,EAAAsF,GAAAtF,EAAAuF,SAAAC,aAAApF,EAAA,KAAAJ,EAAAU,GAAA,WAAAV,EAAAsF,GAAAtF,EAAAuF,SAAAE,cAAArF,EAAA,KAAAJ,EAAAU,GAAA,6BAAAN,EAAA,aAA+LE,MAAA,CAAOQ,YAAA,OAAoBK,MAAA,CAAQC,MAAApB,EAAA,eAAAsB,SAAA,SAAAC,GAAoDvB,EAAA0F,eAAAnE,GAAuBE,WAAA,mBAA8BzB,EAAA2F,GAAA3F,EAAA,mBAAA4F,GAAuC,OAAAxF,EAAA,aAAuBoC,IAAAoD,EAAA3C,GAAA3C,MAAA,CAAmB8B,MAAAwD,EAAAC,SAAAzE,MAAAwE,EAAA3C,QAAyC,SAAA7C,EAAA,QAAsBO,YAAA,gBAAAL,MAAA,CAAmCoB,KAAA,UAAgBA,KAAA,UAAe,CAAAtB,EAAA,aAAkBY,GAAA,CAAIY,MAAA,SAAAE,GAAyB9B,EAAAoF,sBAAA,KAAmC,CAAApF,EAAAU,GAAA,SAAAN,EAAA,aAAkCE,MAAA,CAAOuB,KAAA,WAAiBb,GAAA,CAAKY,MAAA5B,EAAA8F,eAA0B,CAAA9F,EAAAU,GAAA,oBAC/8LqF,EAAA,2BCgLAC,2CAAA,CACAhE,KADA,WAIA,IAAAiE,EAAA,SAAAC,EAAA9E,EAAA+E,GAEA,IAAAC,EAAA,uDAEA,GAAAA,EAAAC,KAAAjF,GAEA,OAAA+E,IAGAA,EAAA,IAAAG,MAAA,cAIAC,EAAA,SAAAL,EAAA9E,EAAA+E,GAEA,IAAAK,EAAA,wEAEA,GAAAA,EAAAH,KAAAjF,GACA,OAAA+E,IAGAA,EAAA,IAAAG,MAAA,eAGA,OAEAlB,sBAAA,EAEAG,SAAA,GAEAkB,UAAA,GAEAf,eAAA,GAGArE,UAAA,CACAqF,MAAA,GACAjD,QAAA,EACAG,SAAA,GAGA3B,SAAA,GACA6B,MAAA,EAEA/B,eAAA,EAEA0C,QAAA,CACAe,SAAA,GACAmB,SAAA,GACAC,MAAA,GACAC,OAAA,IAGAlC,aAAA,CAEAa,SAAA,CACA,CAAAsB,UAAA,EAAAC,QAAA,SAAAC,QAAA,QACA,CAAAC,IAAA,EAAAC,IAAA,EAAAH,QAAA,iBAAAC,QAAA,SAEAL,SAAA,CACA,CAAAG,UAAA,EAAAC,QAAA,QAAAC,QAAA,QACA,CAAAC,IAAA,EAAAC,IAAA,GAAAH,QAAA,iBAAAC,QAAA,SAEAJ,MAAA,CACA,CAAAE,UAAA,EAAAC,QAAA,QAAAC,QAAA,QAEA,CAAAG,UAAAlB,EAAAe,QAAA,SAEAH,OAAA,CACA,CAAAC,UAAA,EAAAC,QAAA,UAAAC,QAAA,QAEA,CAAAG,UAAAZ,EAAAS,QAAA,UAIAlC,mBAAA,EAEAE,SAAA,GAEAC,cAAA,CACA2B,MAAA,CACA,CAAAE,UAAA,EAAAC,QAAA,QAAAC,QAAA,QACA,CAAAG,UAAAlB,EAAAe,QAAA,SAEAH,OAAA,CACA,CAAAC,UAAA,EAAAC,QAAA,UAAAC,QAAA,QACA,CAAAG,UAAAZ,EAAAS,QAAA,YAKAI,QA/FA,WAgGAnH,KAAAiB,eAEAmG,QAAA,CAEA9D,QAFA,eAAA+D,EAAAC,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAAC,EAEApC,GAFA,IAAAqC,EAAAC,EAAA,OAAAJ,mBAAAK,KAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAIAhI,KAAAsF,WAJAwC,EAAAE,KAAA,EAMAhI,KAAAiI,MAAAC,IAAA,SANA,UAAAP,EAAAG,EAAAK,KAMAP,EANAD,EAMA5F,KACA,MAAA6F,EAAAQ,KAAAC,OAPA,CAAAP,EAAAE,KAAA,eAAAF,EAAAQ,OAAA,SAOAtI,KAAAuI,SAAAC,MAAA,WAPA,OASAxI,KAAAwG,UAAAoB,EAAA7F,KAGA/B,KAAAmF,sBAAA,EAZA,wBAAA2C,EAAAW,SAAAf,EAAA1H,SAAA,SAAAsD,EAAAoF,GAAA,OAAArB,EAAAsB,MAAA3I,KAAA4I,WAAA,OAAAtF,EAAA,GAeAuC,aAfA,eAAAgD,EAAAvB,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAAqB,IAAA,IAAAC,EAAAnB,EAAA,OAAAJ,mBAAAK,KAAA,SAAAmB,GAAA,eAAAA,EAAAjB,KAAAiB,EAAAhB,MAAA,UAiBAhI,KAAAyF,eAjBA,CAAAuD,EAAAhB,KAAA,eAAAgB,EAAAV,OAAA,SAiBAtI,KAAAuI,SAAAU,KAAA,QAjBA,cAAAD,EAAAhB,KAAA,EAmBAhI,KAAAiI,MAAAiB,IAAA,SAAAC,OAAAnJ,KAAAsF,SAAAtC,GAAA,UACAoG,IAAApJ,KAAAyF,iBApBA,UAAAsD,EAAAC,EAAAb,KAmBAP,EAnBAmB,EAmBAhH,KAGA,MAAA6F,EAAAQ,KAAAC,OAtBA,CAAAW,EAAAhB,KAAA,eAAAgB,EAAAV,OAAA,SAsBAtI,KAAAuI,SAAAC,MAAA,WAtBA,OAwBAxI,KAAAuI,SAAAc,QAAA,WAEArJ,KAAAiB,cAGAjB,KAAAmF,sBAAA,EA7BA,yBAAA6D,EAAAP,SAAAK,EAAA9I,SAAA,SAAA6F,IAAA,OAAAgD,EAAAF,MAAA3I,KAAA4I,WAAA,OAAA/C,EAAA,GAgCAT,oBAhCA,WAiCApF,KAAAyF,eAAA,GACAzF,KAAAsF,SAAA,IAIArE,YAtCA,eAAAqI,EAAAhC,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAA8B,IAAA,IAAAC,EAAA5B,EAAA,OAAAJ,mBAAAK,KAAA,SAAA4B,GAAA,eAAAA,EAAA1B,KAAA0B,EAAAzB,MAAA,cAAAyB,EAAAzB,KAAA,EAuCAhI,KAAAiI,MAAAC,IAAA,SACAwB,OAAA1J,KAAAoB,YAxCA,UAAAoI,EAAAC,EAAAtB,KAuCAP,EAvCA4B,EAuCAzH,KAGA,MAAA6F,EAAAQ,KAAAC,OA1CA,CAAAoB,EAAAzB,KAAA,eAAAyB,EAAAnB,OAAA,SA2CAtI,KAAAuI,SAAAC,MAAA,cA3CA,OA6CAxI,KAAAgC,SAAA4F,EAAA7F,KAAA4H,MACA3J,KAAA6D,MAAA+D,EAAA7F,KAAA8B,MA9CA,wBAAA4F,EAAAhB,SAAAc,EAAAvJ,SAAA,SAAAiB,IAAA,OAAAqI,EAAAX,MAAA3I,KAAA4I,WAAA,OAAA3H,EAAA,GAkDA8C,iBAlDA,SAkDA6F,GAEA5J,KAAAoB,UAAAuC,SAAAiG,EAEA5J,KAAAiB,eAGAgD,oBAzDA,SAyDA4F,GACA7J,KAAAoB,UAAAoC,QAAAqG,EACA7J,KAAAiB,eAGA0B,gBA9DA,eAAAmH,EAAAxC,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAAsC,EA8DAzE,GA9DA,IAAA0E,EAAApC,EAAA,OAAAJ,mBAAAK,KAAA,SAAAoC,GAAA,eAAAA,EAAAlC,KAAAkC,EAAAjC,MAAA,cAAAiC,EAAAjC,KAAA,EAgEAhI,KAAAiI,MAAAiB,IAAA,SAAAC,OACA7D,EAAAtC,GADA,WAAAmG,OACA7D,EAAA4E,WAjEA,UAAAF,EAAAC,EAAA9B,KAgEAP,EAhEAoC,EAgEAjI,KAIA,MAAA6F,EAAAQ,KAAAC,OApEA,CAAA4B,EAAAjC,KAAA,eAsEA1C,EAAA4E,UAAA5E,EAAA4E,SAtEAD,EAAA3B,OAAA,SAuEAtI,KAAAuI,SAAAC,MAAA,aAvEA,OAyEAxI,KAAAuI,SAAAc,QAAA,YAzEA,wBAAAY,EAAAxB,SAAAsB,EAAA/J,SAAA,SAAA2C,EAAAwH,GAAA,OAAAL,EAAAnB,MAAA3I,KAAA4I,WAAA,OAAAjG,EAAA,GA4EA2B,gBA5EA,WA8EAtE,KAAAoK,MAAAC,WAAAC,eAGA1F,QAjFA,WAiFA,IAAA2F,EAAAvK,KACAA,KAAAoK,MAAAC,WAAAG,SAAA,eAAAC,EAAAnD,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAAiD,EAAAC,GAAA,IAAAC,EAAAhD,EAAA,OAAAJ,mBAAAK,KAAA,SAAAgD,GAAA,eAAAA,EAAA9C,KAAA8C,EAAA7C,MAAA,UAEA2C,EAFA,CAAAE,EAAA7C,KAAA,eAAA6C,EAAAvC,OAAA,wBAAAuC,EAAA7C,KAAA,EAIAuC,EAAAtC,MAAA6C,KAAA,QAAAP,EAAA/F,SAJA,UAAAoG,EAAAC,EAAA1C,KAIAP,EAJAgD,EAIA7I,KAEA,MAAA6F,EAAAQ,KAAAC,OANA,CAAAwC,EAAA7C,KAAA,eAAA6C,EAAAvC,OAAA,SAOAiC,EAAAhC,SAAAC,MAAA,WAPA,OAUA+B,EAAAhC,SAAAC,MAAA,UAEA+B,EAAAzI,eAAA,EAEAyI,EAAAtJ,cAdA,yBAAA4J,EAAApC,SAAAiC,EAAA1K,SAAA,gBAAA+K,GAAA,OAAAN,EAAA9B,MAAA3I,KAAA4I,YAAA,KAkBA7F,eApGA,eAAAiI,EAAA1D,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAAwD,EAoGAjI,GApGA,IAAAkI,EAAAtD,EAAA,OAAAJ,mBAAAK,KAAA,SAAAsD,GAAA,eAAAA,EAAApD,KAAAoD,EAAAnD,MAAA,cAsGAhI,KAAA6E,mBAAA,EAtGAsG,EAAAnD,KAAA,EAwGAhI,KAAAiI,MAAAC,IAAA,SAAAiB,OAAAnG,IAxGA,UAAAkI,EAAAC,EAAAhD,KAwGAP,EAxGAsD,EAwGAnJ,KACA,MAAA6F,EAAAQ,KAAAC,OAzGA,CAAA8C,EAAAnD,KAAA,eAAAmD,EAAA7C,OAAA,SA0GAtI,KAAAuI,SAAAC,MAAA,aA1GA,OA6GAxI,KAAA+E,SAAA6C,EAAA7F,KA7GA,wBAAAoJ,EAAA1C,SAAAwC,EAAAjL,SAAA,SAAA+C,EAAAqI,GAAA,OAAAJ,EAAArC,MAAA3I,KAAA4I,WAAA,OAAA7F,EAAA,GAgHA+B,iBAhHA,WAkHA9E,KAAAoK,MAAAiB,YAAAf,eAGApF,aArHA,WAqHA,IAAAoG,EAAAtL,KACAA,KAAAoK,MAAAiB,YAAAb,SAAA,eAAAe,EAAAjE,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAA+D,EAAAb,GAAA,IAAAc,EAAA7D,EAAA,OAAAJ,mBAAAK,KAAA,SAAA6D,GAAA,eAAAA,EAAA3D,KAAA2D,EAAA1D,MAAA,UACA2C,EADA,CAAAe,EAAA1D,KAAA,eAAA0D,EAAApD,OAAA,wBAAAoD,EAAA1D,KAAA,EAGAsD,EAAArD,MAAAiB,IAAA,SAAAC,OACAmC,EAAAvG,SAAA/B,IACA,CACA2D,MAAA2E,EAAAvG,SAAA4B,MACAC,OAAA0E,EAAAvG,SAAA6B,SAPA,UAAA6E,EAAAC,EAAAvD,KAGAP,EAHA6D,EAGA1J,KAQA,MAAA6F,EAAAQ,KAAAC,OAXA,CAAAqD,EAAA1D,KAAA,eAAA0D,EAAApD,OAAA,SAYAgD,EAAA/C,SAAAC,MAAA,WAZA,OAgBA8C,EAAAzG,mBAAA,EAEAyG,EAAArK,cAEAqK,EAAA/C,SAAAc,QAAA,UApBA,yBAAAqC,EAAAjD,SAAA+C,EAAAxL,SAAA,gBAAA2L,GAAA,OAAAJ,EAAA5C,MAAA3I,KAAA4I,YAAA,KAwBA3F,eA9IA,eAAA2I,EAAAtE,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAAoE,EA8IA7I,GA9IA,IAAA8I,EAAAC,EAAAnE,EAAA,OAAAJ,mBAAAK,KAAA,SAAAmE,GAAA,eAAAA,EAAAjE,KAAAiE,EAAAhE,MAAA,cAAAgE,EAAAhE,KAAA,EAgJAhI,KAAAiM,SACA,qBACA,KACA,CACAC,kBAAA,KACAC,iBAAA,KACAvK,KAAA,UACAwK,QAAA,IAEAC,MAAA,SAAAC,GAAA,OAAAA,IAzJA,UAgJAR,EAhJAE,EAAA7D,KA6JA,YAAA2D,EA7JA,CAAAE,EAAAhE,KAAA,eAAAgE,EAAA1D,OAAA,SA8JAtI,KAAAuI,SAAAU,KAAA,UA9JA,cAAA+C,EAAAhE,KAAA,EAkKAhI,KAAAiI,MAAAsE,OAAA,SAAAvJ,GAlKA,UAAA+I,EAAAC,EAAA7D,KAkKAP,EAlKAmE,EAkKAhK,KAEA,MAAA6F,EAAAQ,KAAAC,OApKA,CAAA2D,EAAAhE,KAAA,gBAAAgE,EAAA1D,OAAA,SAoKAtI,KAAAuI,SAAAC,MAAA,SApKA,QAsKAxI,KAAAuI,SAAAc,QAAA,QAEArJ,KAAAiB,cAxKA,yBAAA+K,EAAAvD,SAAAoD,EAAA7L,SAAA,SAAAiD,EAAAuJ,GAAA,OAAAZ,EAAAjD,MAAA3I,KAAA4I,WAAA,OAAA3F,EAAA,MCnR8VwJ,EAAA,cCO9VC,EAAgBpF,OAAAqF,EAAA,KAAArF,CACdmF,EACA3M,EACAgG,GACF,EACA,KACA,WACA,MAIe8G,EAAA,WAAAF","file":"js/user.5b0543fd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")]),_c('el-breadcrumb-item',[_vm._v(\"用户列表\")])],1),_c('el-card',{staticClass:\"box-card\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},on:{\"clear\":_vm.getUserList},model:{value:(_vm.queryInfo.query),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"query\", $$v)},expression:\"queryInfo.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getUserList},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogVisible=true}}},[_vm._v(\"添加用户\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.userlist,\"border\":\"\",\"row-key\":\"id\"}},[_c('el-table-column',{attrs:{\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"label\":\"姓名\",\"prop\":\"username\"}}),_c('el-table-column',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}}),_c('el-table-column',{attrs:{\"label\":\"电话\",\"prop\":\"mobile\"}}),_c('el-table-column',{attrs:{\"label\":\"角色\",\"prop\":\"role_name\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{on:{\"change\":function($event){return _vm.userStateChange(scope.row)}},model:{value:(scope.row.mg_state),callback:function ($$v) {_vm.$set(scope.row, \"mg_state\", $$v)},expression:\"scope.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id)}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.removeUserById(scope.row.id)}}}),_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"分配角色\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"warning\",\"size\":\"mini\",\"icon\":\"el-icon-setting\"},on:{\"click\":function($event){return _vm.setRole(scope.row)}}})],1)]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-sizes\":[2, 4, 1, 7],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.dialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"close\":_vm.addDialogClosed}},[_c('el-form',{ref:\"addFormRef\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.addFormRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addForm.username),callback:function ($$v) {_vm.$set(_vm.addForm, \"username\", $$v)},expression:\"addForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{model:{value:(_vm.addForm.password),callback:function ($$v) {_vm.$set(_vm.addForm, \"password\", $$v)},expression:\"addForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.addForm.email),callback:function ($$v) {_vm.$set(_vm.addForm, \"email\", $$v)},expression:\"addForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.addForm.mobile),callback:function ($$v) {_vm.$set(_vm.addForm, \"mobile\", $$v)},expression:\"addForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改用户\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"close\":_vm.editDialogClosed}},[_c('el-form',{ref:\"editFormRef\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.editFormRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editForm.username),callback:function ($$v) {_vm.$set(_vm.editForm, \"username\", $$v)},expression:\"editForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.editForm.email),callback:function ($$v) {_vm.$set(_vm.editForm, \"email\", $$v)},expression:\"editForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.editForm.mobile),callback:function ($$v) {_vm.$set(_vm.editForm, \"mobile\", $$v)},expression:\"editForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editUserInfo}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配角色\",\"visible\":_vm.setRoleDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.setRoleDialogVisible=$event},\"close\":_vm.setRoleDialogClosed}},[_c('div',[_c('p',[_vm._v(\"当前的用户 : \"+_vm._s(_vm.userInfo.username))]),_c('p',[_vm._v(\"当前的角色 : \"+_vm._s(_vm.userInfo.role_name))]),_c('p',[_vm._v(\"\\n        分配新角色\\n        \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.selectedRoleId),callback:function ($$v) {_vm.selectedRoleId=$$v},expression:\"selectedRoleId\"}},_vm._l((_vm.rolesList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.roleName,\"value\":item.id}})}),1)],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveRoleInfo}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- 1. 绘制用户列表基本结构 : 去官网找面包屑组件, 按需导入 -->\r\n  <div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <!-- 2.找卡片组件 -->\r\n    <el-card class=\"box-card\">\r\n      <!-- 4. 利用布局组件调试 :gutter=\"20\" 指每一栏之间的间隔, :span指定宽度 -->\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"8\">\r\n          <!-- 3.输入框中的搜索框结构 -->\r\n          <el-input placeholder=\"请输入内容\" v-model=\"queryInfo.query\" clearable @clear=\"getUserList\">\r\n            <!-- 13. 点击搜索根据关键字显示列表,只需要通过v-model监听query参数, 然后再次调用getUserInfo -->\r\n            <!-- 14. 优化用户又想看到所有数据, 找input可以清空的属性clearable, 通过监听clear再次发出getUserList -->\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getUserList\"></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <!-- 按钮组件 -->\r\n        <el-col :span=\"4\">\r\n          <!-- 15. 3 绑定事件显示弹框 -->\r\n          <el-button @click=\"dialogVisible=true\" type=\"primary\">添加用户</el-button>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <!-- 6.table组件 用户列表区域 -->\r\n      <el-table :data=\"userlist\" border row-key=\"id\">\r\n        <!-- 7.添加索引列 type=\"index\" -->\r\n        <el-table-column type=\"index\"></el-table-column>\r\n        <el-table-column label=\"姓名\" prop=\"username\"></el-table-column>\r\n        <el-table-column label=\"邮箱\" prop=\"email\"></el-table-column>\r\n        <el-table-column label=\"电话\" prop=\"mobile\"></el-table-column>\r\n        <el-table-column label=\"角色\" prop=\"role_name\"></el-table-column>\r\n\r\n        <el-table-column label=\"状态\">\r\n          <!-- 8. 设置状态, 状态不需要prop属性, 可以通过作用域插槽slot-scope=\"scope\"获取当前索引的数据, 使用模板测一下 -->\r\n          <template slot-scope=\"scope\">\r\n            <!-- 8.1{{scope.row}}, 测试成功, 找到switch模板复制过来 -->\r\n            <el-switch v-model=\"scope.row.mg_state\" @change=\"userStateChange(scope.row)\"></el-switch>\r\n            <!-- 12. 用chang监听状态改变, 传作用域上的数据 -->\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"180\">\r\n          <!-- 9.设置修改, 删除, 分配角色按钮 -->\r\n          <!-- 修改  19. 点击修改, 添加template, 设置作用域 -->\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              type=\"primary\"\r\n              icon=\"el-icon-edit\"\r\n              size=\"mini\"\r\n              @click=\"showEditDialog(scope.row.id)\"\r\n            ></el-button>\r\n\r\n            <!-- 删除 25. 点击删除, 弹的是确认框, 找弹框组件, 需要按需导入. 并在原型上注册 Vue.prototype.$confirm = MessageBox.confirm -->\r\n            <el-button\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              size=\"mini\"\r\n              @click=\"removeUserById(scope.row.id)\"\r\n            ></el-button>\r\n            <!-- 10. 给分配角色设置提示消息, 找tooltip组件, 问题:鼠标可以停留在tooltip的问题会遮挡上一列表的按钮, 找属性 :enterable=\"false\" -->\r\n            <el-tooltip\r\n              class=\"item\"\r\n              effect=\"dark\"\r\n              content=\"分配角色\"\r\n              placement=\"top\"\r\n              :enterable=\"false\"\r\n            >\r\n              <el-button type=\"warning\" size=\"mini\" icon=\"el-icon-setting\" @click=\"setRole(scope.row)\"></el-button>\r\n              <!-- 第三. 绑定click事件 -->\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 11.分页区域 找分页组件的完整功能 -->\r\n      <!-- page-sizes=\"[2, 4, 1, 7]\" : 显示个数的选项列表 -->\r\n      <!-- layout 用来定制对应的布局结构 -->\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryInfo.pagenum\"\r\n        :page-sizes=\"[2, 4, 1, 7]\"\r\n        :page-size=\"queryInfo.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n      ></el-pagination>\r\n    </el-card>\r\n\r\n    <!-- 15.添加用户的对话框 -->\r\n    <!-- 15.1 去data中设置控制添加用户对话框的显示和隐藏 -->\r\n    <!-- 15.2 分析完结构后给添加用户绑定click事件, 绑定完之后找16项 -->\r\n    <!-- :visible.sync=\"dialogVisible\"对话框的显示和隐藏  -->\r\n    <el-dialog title=\"添加用户\" :visible.sync=\"dialogVisible\" width=\"50%\" @close=\"addDialogClosed\">\r\n      <!-- 17. 当关闭对话框时，重置表单 绑定@close事件 -->\r\n      <!-- 内容主体区域 -->\r\n\r\n      <!-- 16. 找表单组件的验证表单的前四条复制 -->\r\n      <!-- :model 添加用户的表单对象 :rules 验证规则对象 ref 当前元素的引用名称  -->\r\n      <el-form :model=\"addForm\" :rules=\"addFormRules\" ref=\"addFormRef\" label-width=\"70px\">\r\n        <!-- prop=\"username\" : 验证规则中的属性 -->\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"addForm.username\"></el-input>\r\n        </el-form-item>\r\n        <!-- 16.3 测试过复制, 然后自定义验证 -->\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"addForm.password\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"addForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"addForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <!-- 点击取消和确定都可以控制对话框 -->\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addUser\">确 定</el-button>\r\n        <!-- 18. 点击添加新用户 -->\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 20. 设置点击修改的弹框, 重复添加弹框时的操作 -->\r\n    <el-dialog title=\"修改用户\" :visible.sync=\"editDialogVisible\" width=\"50%\" @close=\"editDialogClosed\">\r\n      <!-- 23.设置完表单验证规则后, 监听close事件重置表单  -->\r\n      <el-form :model=\"editForm\" :rules=\"editFormRules\" ref=\"editFormRef\" label-width=\"70px\">\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"editForm.username\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"editForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"editForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editUserInfo\">确 定</el-button>\r\n        <!-- 24.点击修改用户信息 -->\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!--第一. 写完角色列表, 添加分配角色的对话框 -->\r\n    <el-dialog title=\"分配角色\" :visible.sync=\"setRoleDialogVisible\" width=\"50%\" @close=\"setRoleDialogClosed\" >\r\n      <!-- 第五. 获取当前的用户信息 -->\r\n      <div>\r\n        <p>当前的用户 : {{ userInfo.username }}</p>\r\n        <p>当前的角色 : {{ userInfo.role_name }}</p>\r\n        <!-- 第八, 拷贝select选择器组件, v-model的值去data定义, 为了拿到选中的id值 -->\r\n        <p>\r\n          分配新角色\r\n          <el-select v-model=\"selectedRoleId\" placeholder=\"请选择\">\r\n            <!-- 第九.其data中 定义被选中的值, 为了点击确认传参 -->\r\n            <el-option\r\n              v-for=\"item in rolesList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.roleName\"\r\n              :value=\"item.id\">\r\n            </el-option>\r\n          </el-select>\r\n        </p>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"setRoleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveRoleInfo\">确 定</el-button>\r\n        <!-- 第十. 点击确定绑定事件 -->\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    //16.4 设置自定义校验规则\r\n    // 验证邮箱的规则\r\n    var checkEmail = (rule, value, cb) => {\r\n      // 验证邮箱的正则表达式\r\n      const regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/\r\n\r\n      if (regEmail.test(value)) {\r\n        // 合法的邮箱\r\n        return cb()\r\n      }\r\n\r\n      cb(new Error('请输入合法的邮箱'))\r\n    }\r\n\r\n    // 验证手机号的规则\r\n    var checkMobile = (rule, value, cb) => {\r\n      // 验证手机号的正则表达式\r\n      const regMobile = /^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/\r\n\r\n      if (regMobile.test(value)) {\r\n        return cb()\r\n      }\r\n\r\n      cb(new Error('请输入合法的手机号'))\r\n    }\r\n\r\n    return {\r\n      // 第二. 控制角色对话框的显示和隐藏\r\n      setRoleDialogVisible: false,\r\n      //第五. 存储需要被分配角色的用户信息\r\n      userInfo: {},\r\n      //第七. 获取用户的角色列表\r\n      rolesList:[],\r\n      //第九. 定义被选中的值\r\n      selectedRoleId:'',\r\n\r\n      //5.1 设置用户列表的参数对象\r\n      queryInfo: {\r\n        query: '', //查询字符串\r\n        pagenum: 1, //默认显示第一页\r\n        pagesize: 2 //每页显示的个数\r\n      },\r\n      //5.2 存储用户数据\r\n      userlist: [],\r\n      total: 0,\r\n      //15.1 控制添加用户对话框的显示和隐藏\r\n      dialogVisible: false,\r\n      //16.1 添加用户的表单数据\r\n      addForm: {\r\n        username: '',\r\n        password: '',\r\n        email: '',\r\n        mobile: ''\r\n      },\r\n      //16.2 添加表单的验证规则对象\r\n      addFormRules: {\r\n        //设置规则\r\n        username: [\r\n          { required: true, message: '请输入用户名', trigger: 'blur' },\r\n          { min: 3, max: 5, message: '长度在 3 到 12 个字符', trigger: 'blur' }\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n          { min: 6, max: 15, message: '长度在 6 到 15 个字符', trigger: 'blur' }\r\n        ],\r\n        email: [\r\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n          // 16.5 调用自定义的校验规则\r\n          { validator: checkEmail, trigger: 'blur' }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: '请输入手机号码', trigger: 'blur' },\r\n          // 16.5 调用自定义的校验规则\r\n          { validator: checkMobile, trigger: 'blur' }\r\n        ]\r\n      },\r\n      //21.控制修改对话用户框的显示与隐藏\r\n      editDialogVisible: false,\r\n      //22.存储根据id修改的数据\r\n      editForm: {},\r\n      //23. 添加表单的验证规则\r\n      editFormRules: {\r\n        email: [\r\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n          { validator: checkEmail, trigger: 'blur' }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: '请输入手机号码', trigger: 'blur' },\r\n          { validator: checkMobile, trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getUserList()\r\n  },\r\n  methods: {\r\n    //第四. 监听点击显示分配角色的对话框, 传实参, 用户信息scope.row\r\n    async setRole(userInfo){\r\n      //获取需要被分配的用户信息, 传参, 并渲染在页面\r\n      this.userInfo = userInfo;\r\n      //第六. 在展示对话框前获取所有的角色列表1.5.1\r\n     const {data: res} = await this.$http.get('roles');\r\n     if(res.meta.status !== 200) return this.$message.error(\"获取角色失败\");\r\n     //保存角色列表到data中\r\n     this.rolesList = res.data;\r\n\r\n      //显示\r\n      this.setRoleDialogVisible = true;\r\n    },\r\n    //第十一. 监听确定按钮分配角色\r\n    async saveRoleInfo(){\r\n      //判断\r\n      if(!this.selectedRoleId)return this.$message.info(\"请选择\");\r\n      //请求数据1.3.7接口\r\n      const {data: res} = await this.$http.put(`users/${this.userInfo.id}/role`,{\r\n        rid: this.selectedRoleId\r\n      });\r\n      if(res.meta.status !== 200) return this.$message.error('更新角色失败');\r\n\r\n      this.$message.success('更新角色成功!');\r\n      //再初始化数据\r\n      this.getUserList();\r\n      //第十二. 优化监听弹框关闭时, 重置数据, 去绑定@close事件\r\n\r\n      this.setRoleDialogVisible = false\r\n    },\r\n    //第十三. 监听弹框关闭\r\n    setRoleDialogClosed(){\r\n      this.selectedRoleId = '',\r\n      this.userInfo = {};\r\n    },\r\n\r\n    //5. 获取用户列表数据\r\n    async getUserList() {\r\n      const { data: res } = await this.$http.get('users', {\r\n        params: this.queryInfo\r\n      })\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('获取用户列表失败！')\r\n      }\r\n      this.userlist = res.data.users\r\n      this.total = res.data.total\r\n      //console.log(res)\r\n    },\r\n    //11.1.监听pagesize改变的事件\r\n    handleSizeChange(newSize) {\r\n      //经过打印测试, 获取最新的每页的条数, 赋值\r\n      this.queryInfo.pagesize = newSize\r\n      //再重新获取数据\r\n      this.getUserList()\r\n    },\r\n    //11.2.监听当前页码改变的事件\r\n    handleCurrentChange(newPage) {\r\n      this.queryInfo.pagenum = newPage\r\n      this.getUserList()\r\n    },\r\n    //12.1.监听状态改变\r\n    async userStateChange(userInfo) {\r\n      // console.log(userInfo);//可以得到状态, 数据请求\r\n      const { data: res } = await this.$http.put(\r\n        `users/${userInfo.id}/state/${userInfo.mg_state}`\r\n      )\r\n      //校验\r\n      if (res.meta.status !== 200) {\r\n        //重置状态\r\n        userInfo.mg_state = !userInfo.mg_state\r\n        return this.$message.error('更新用户状态失败')\r\n      }\r\n      this.$message.success('更新用户状态成功')\r\n    },\r\n    //17.1 绑定事件\r\n    addDialogClosed() {\r\n      //对话框关闭之后，重置表达\r\n      this.$refs.addFormRef.resetFields()\r\n    },\r\n    //18.1添加新用户\r\n    addUser() {\r\n      this.$refs.addFormRef.validate(async valid => {\r\n        console.log(valid) // 获取验证的状态. 布尔值\r\n        if (!valid) return\r\n        //可以发起请求\r\n        const { data: res } = await this.$http.post('users', this.addForm)\r\n        //后台校验\r\n        if (res.meta.status !== 201) {\r\n          return this.$message.error('添加用户失败')\r\n        }\r\n\r\n        this.$message.error('添加用户成功')\r\n        // 隐藏添加用户的对话框\r\n        this.dialogVisible = false\r\n        // 重新获取用户列表数据\r\n        this.getUserList()\r\n      })\r\n    },\r\n    //19.1 点击操作修改, 传id, 根据id请求数据\r\n    async showEditDialog(id) {\r\n      //显示弹框\r\n      this.editDialogVisible = true\r\n      //根据id请求数据\r\n      const { data: res } = await this.$http.get(`users/${id}`)\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('查询用户信息失败')\r\n      }\r\n      //将数据保存到data中\r\n      this.editForm = res.data\r\n    },\r\n    //23.1 绑定事件重置表单\r\n    editDialogClosed() {\r\n      //对话框关闭之后，重置表单\r\n      this.$refs.editFormRef.resetFields()\r\n    },\r\n    //24.1监听修改事件\r\n    editUserInfo() {\r\n      this.$refs.editFormRef.validate(async valid => {\r\n        if (!valid) return\r\n        //发起数据请求, 在editForm存了根据id获取的数据\r\n        const { data: res } = await this.$http.put(\r\n          `users/${this.editForm.id}`,\r\n          {\r\n            email: this.editForm.email,\r\n            mobile: this.editForm.mobile\r\n          }\r\n        )\r\n\r\n        if (res.meta.status !== 200) {\r\n          return this.$message.error('更新用户失败')\r\n        }\r\n\r\n        //成功则关闭弹框\r\n        this.editDialogVisible = false\r\n        //刷新数据列表\r\n        this.getUserList()\r\n        //提示修改成功\r\n        this.$message.success('更新用户成功')\r\n      })\r\n    },\r\n    //25.1 点击根据id删除, 弹消息确认框, 根据官方文档按需引入\r\n    async removeUserById(id) {\r\n      //去官网复制代码\r\n      const confirmResult = await this.$confirm(\r\n        '此操作将永久删除该用户, 是否继续?',\r\n        '提示',\r\n        {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n          center: true\r\n        }\r\n      ).catch(err => err)\r\n      //console.log(confirmResult) // 是promise, 通过async简化其操作, 再打印测试, 返回字符串, 点击取消报错. 用catch方法捕获去错误操作\r\n      //如果用户点击确认，则confirmResult 为'confirm'\r\n      //如果用户点击取消, 则confirmResult获取的就是catch的错误消息'cancel'\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('已取消删除')\r\n      }\r\n      //console.log(\"你想删除\");\r\n      //发请求\r\n      const { data: res } = await this.$http.delete('users/' + id)\r\n\r\n      if (res.meta.status !== 200) return this.$message.error('删除失败')\r\n\r\n      this.$message.success('删除成功')\r\n      //刷新数据\r\n      this.getUserList()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=dd34d6fc&scoped=true&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dd34d6fc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}