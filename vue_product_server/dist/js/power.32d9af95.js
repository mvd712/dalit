(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["power"],{1613:function(t,e,r){"use strict";var n=r("867f"),a=r.n(n);a.a},"1af6":function(t,e,r){var n=r("63b6");n(n.S,"Array",{isArray:r("9003")})},"20fd":function(t,e,r){"use strict";var n=r("d9f6"),a=r("aebd");t.exports=function(t,e,r){e in t?n.f(t,e,a(0,r)):t[e]=r}},"3024f":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("权限管理")]),r("el-breadcrumb-item",[t._v("角色列表")])],1),r("el-card",[r("el-row",[r("el-col",[r("el-button",{attrs:{type:"primary"}},[t._v("添加角色")])],1)],1),r("el-table",{attrs:{data:t.rolelist,border:"",stripe:"","row-key":"id"}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.children,function(n,a){return r("el-row",{key:n.id,class:["bdbottom",0==a?"bdtop":"","vcenter"]},[r("el-col",{attrs:{span:5}},[r("el-tag",{attrs:{closable:""},on:{close:function(r){return t.removeRights(e.row,n.id)}}},[t._v(t._s(n.authName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:19}},t._l(n.children,function(n,a){return r("el-row",{key:n.id,class:[0==a?"":"bdtop","vcenter"]},[r("el-col",{attrs:{span:6}},[r("el-tag",{attrs:{type:"success",closable:""},on:{close:function(r){return t.removeRights(e.row,n.id)}}},[t._v(t._s(n.authName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:18}},t._l(n.children,function(n,a){return r("el-tag",{key:n.id,attrs:{type:"warning",closable:""},on:{close:function(r){return t.removeRights(e.row,n.id)}}},[t._v(t._s(n.authName))])}),1)],1)}),1)],1)})}}])}),r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),r("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc"}}),r("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"}},[t._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"}},[t._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-setting"},on:{click:function(r){return t.showSetRightDialog(e.row)}}},[t._v("分配权限")])]}}])})],1)],1),r("el-dialog",{attrs:{title:"分配权限",visible:t.setRightDialogVisible,width:"30%"},on:{"update:visible":function(e){t.setRightDialogVisible=e},close:t.setRightsDialogClosed}},[r("el-tree",{ref:"treeRef",attrs:{data:t.rightsList,props:t.treeProps,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":t.defKeys}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.setRightDialogVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.allotRights}},[t._v("确 定")])],1)],1)],1)},a=[],i=r("a745"),s=r.n(i);function o(t){if(s()(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var c=r("774e"),l=r.n(c),u=r("c8bb"),f=r.n(u);function h(t){if(f()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return l()(t)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){return o(t)||h(t)||d()}r("ac6a"),r("96cf");var b=r("3b8d"),g=(r("cadf"),r("551c"),r("f751"),r("097d"),{data:function(){return{rolelist:[],setRightDialogVisible:!1,rightsList:[],treeProps:{label:"authName",children:"children"},defKeys:[],roleId:""}},created:function(){this.getRolesList()},methods:{getRolesList:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("roles");case 2:if(e=t.sent,r=e.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",this.$message.error("获取角色列表失败！"));case 6:this.rolelist=r.data;case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),removeRights:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(e,r){var n,a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(t){return t});case 2:if(n=t.sent,"confirm"===n){t.next=5;break}return t.abrupt("return",this.$message.info("取消了删除"));case 5:return t.next=7,this.$http.delete("roles/".concat(e.id,"/rights/").concat(r));case 7:if(a=t.sent,i=a.data,200===i.meta.status){t.next=11;break}return t.abrupt("return",this.$message.error("删除失败"));case 11:this.$message.success("删除成功"),e.children=i.data;case 13:case"end":return t.stop()}},t,this)}));function e(e,r){return t.apply(this,arguments)}return e}(),showSetRightDialog:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(e){var r,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.roleId=e.id,t.next=3,this.$http.get("rights/tree");case 3:if(r=t.sent,n=r.data,200===n.meta.status){t.next=7;break}return t.abrupt("return",this.$message.error("获取权限数据失败"));case 7:this.rightsList=n.data,this.getLeafKeys(e,this.defKeys),this.setRightDialogVisible=!0;case 10:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getLeafKeys:function(t,e){var r=this;if(!t.children)return e.push(t.id);t.children.forEach(function(t){r.getLeafKeys(t,e)})},setRightsDialogClosed:function(){this.defKeys=[]},allotRights:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(){var e,r,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=[].concat(p(this.$refs.treeRef.getCheckedKeys()),p(this.$refs.treeRef.getHalfCheckedKeys())),r=e.join(","),t.next=4,this.$http.post("roles/".concat(this.roleId,"/rights"),{rids:r});case 4:if(n=t.sent,a=n.data,200===a.meta.status){t.next=8;break}return t.abrupt("return",this.$message.error("分配权限失败"));case 8:this.$message.success("分配权限成功"),this.getRolesList(),this.setRightDialogVisible=!1;case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}}),m=g,v=(r("1613"),r("2877")),y=Object(v["a"])(m,n,a,!1,null,"513c341b",null);e["default"]=y.exports},"549b":function(t,e,r){"use strict";var n=r("d864"),a=r("63b6"),i=r("241e"),s=r("b0dc"),o=r("3702"),c=r("b447"),l=r("20fd"),u=r("7cd6");a(a.S+a.F*!r("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,a,f,h=i(t),d="function"==typeof this?this:Array,p=arguments.length,b=p>1?arguments[1]:void 0,g=void 0!==b,m=0,v=u(h);if(g&&(b=n(b,p>2?arguments[2]:void 0,2)),void 0==v||d==Array&&o(v))for(e=c(h.length),r=new d(e);e>m;m++)l(r,m,g?b(h[m],m):h[m]);else for(f=v.call(h),r=new d;!(a=f.next()).done;m++)l(r,m,g?s(f,b,[a.value,m],!0):a.value);return r.length=m,r}})},"54a1":function(t,e,r){r("6c1c"),r("1654"),t.exports=r("95d5")},"774e":function(t,e,r){t.exports=r("d2d5")},"867f":function(t,e,r){},9003:function(t,e,r){var n=r("6b4c");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"95d5":function(t,e,r){var n=r("40c3"),a=r("5168")("iterator"),i=r("481b");t.exports=r("584a").isIterable=function(t){var e=Object(t);return void 0!==e[a]||"@@iterator"in e||i.hasOwnProperty(n(e))}},a745:function(t,e,r){t.exports=r("f410")},a766:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("权限管理")]),r("el-breadcrumb-item",[t._v("权限列表")])],1),r("el-card",[r("el-table",{attrs:{data:t.rightsList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{label:"权限名称",prop:"authName"}}),r("el-table-column",{attrs:{label:"路径",prop:"path"}}),r("el-table-column",{attrs:{label:"权限等级",prop:"level"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"===e.row.level?r("el-tag",[t._v("一级")]):"1"===e.row.level?r("el-tag",{attrs:{type:"success"}},[t._v("二级")]):r("el-tag",{attrs:{type:"warning"}},[t._v("三级")])]}}])})],1)],1)],1)},a=[],i=(r("96cf"),r("3b8d")),s=(r("cadf"),r("551c"),r("f751"),r("097d"),{data:function(){return{rightsList:[]}},created:function(){this.getRightsList()},methods:{getRightsList:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("rights/list");case 2:if(e=t.sent,r=e.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",this.$message.error("获取权限列表失败"));case 6:this.rightsList=r.data;case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}}),o=s,c=r("2877"),l=Object(c["a"])(o,n,a,!1,null,"730e4946",null);e["default"]=l.exports},ac6a:function(t,e,r){for(var n=r("cadf"),a=r("0d58"),i=r("2aba"),s=r("7726"),o=r("32e9"),c=r("84f2"),l=r("2b4c"),u=l("iterator"),f=l("toStringTag"),h=c.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=a(d),b=0;b<p.length;b++){var g,m=p[b],v=d[m],y=s[m],w=y&&y.prototype;if(w&&(w[u]||o(w,u,h),w[f]||o(w,f,m),c[m]=h,v))for(g in n)w[g]||i(w,g,n[g],!0)}},c8bb:function(t,e,r){t.exports=r("54a1")},d2d5:function(t,e,r){r("1654"),r("549b"),t.exports=r("584a").Array.from},f410:function(t,e,r){r("1af6"),t.exports=r("584a").Array.isArray}}]);
//# sourceMappingURL=power.32d9af95.js.map